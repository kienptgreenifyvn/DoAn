<!DOCTYPE html>
<html lang="en">
  <head>
    <%- include("./layout/layout.css.ejs") %>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/notify/0.4.2/styles/metro/notify-metro.css" />
  </head>

  <body>
    
    <!-- Page Wrapper -->
    <div id="wrapper">

      <!-- Sidebar -->
      <ul class="navbar-nav bg-secondary sidebar sidebar-dark accordion" id="accordionSidebar">

          <!-- Sidebar - Brand -->
          <a class="sidebar-brand d-flex align-items-center justify-content-center" href="/sinhvien">
              <div class="sidebar-brand-icon ">
                  <i class="fas fa-landmark"></i>
              </div>
              <div class="sidebar-brand-text mx-3" style="font-size: 13px;">QUẢN LÝ ĐỒ ÁN TỐT NGHIỆP</div>
          </a>

          <!-- Divider -->
          <hr class="sidebar-divider my-0">

          <!-- Nav Item - Dashboard -->
          <li class="nav-item active">
              <a class="nav-link" href="/sinhvien">
                  <i class="fas fa-fw fa-tachometer-alt"></i>
                  <span>Trang chủ</span></a>
          </li>
       

          <!-- Divider -->
          <hr class="sidebar-divider">

          <li class="nav-item">
            <a class="nav-link" href="/sinhvien/timkiemdetai">
                  <i class="fas fa-fw fa-chart-area"></i>
                  <span>Tìm kiếm đồ án</span></a>
          </li>
		    <li class="nav-item">
            <a class="nav-link" href="/sinhvien/danhsachgiangvien">
                  <i class="fas fa-fw fa-chart-area"></i>
                  <span>Tìm kiếm giảng viên <span></a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/sinhvien/dangkydetai">
                <i class="fas fa-fw fa-table"></i>
                <span>Đăng ký đề tài</span></a>
        </li> 
		     <li class="nav-item">
            <a class="nav-link dangky" href="/sinhvien/nopdoan">
                <i class="fas fa-fw fa-table"></i>
                <span>Nộp đồ án</span></a>
        </li>
      
		  
 

          <!-- Nav Item - Charts -->
        
          <!-- Divider -->
          <hr class="sidebar-divider d-none d-md-block">

          <!-- Sidebar Toggler (Sidebar) -->
          <div class="text-center d-none d-md-inline">
              <button class="rounded-circle border-0" id="sidebarToggle"></button>
          </div>

       

      </ul>
      <!-- End of Sidebar -->

      <!-- Content Wrapper -->
      <div id="content-wrapper" class="d-flex flex-column">

          <!-- Main Content -->
          <div id="content">

              <!-- Topbar -->
              <nav class="navbar navbar-expand navbar-light bg-white topbar mb-4 static-top shadow">

                  <!-- Sidebar Toggle (Topbar) -->
                  <button id="sidebarToggleTop" class="btn btn-link d-md-none rounded-circle mr-3">
                      <i class="fa fa-bars"></i>
                  </button>

                  <!-- Topbar Search -->
                 
                  <h6 class="h4 mb-0 font-weight-bold " style="color: #2d3255;">Xin chào sinh viên <%=sinhvien.tensinhvien %></h6>
                  <!-- Topbar Navbar -->
                  <ul class="navbar-nav ml-auto">

                     

                      <div class="topbar-divider d-none d-sm-block"></div>

                      <!-- Nav Item - User Information -->
                      <li class="nav-item dropdown no-arrow">
                          <a class="nav-link dropdown-toggle" href="#" id="userDropdown" role="button"
                              data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                              <span class="mr-2 d-none d-lg-inline text-gray-600 small"><%=sinhvien.tensinhvien %></span>
                              <img class="img-profile rounded-circle"
                                  src="http://localhost:8008/uploads/<%=sinhvien.anhsinhvien %>">
                          </a>
                          <!-- Dropdown - User Information -->
                          <div class="dropdown-menu dropdown-menu-right shadow animated--grow-in"
                              aria-labelledby="userDropdown">
                              <a class="dropdown-item" href="/sinhvien/thongtintaikhoan">
                                  <i class="fas fa-user fa-sm fa-fw mr-2 text-gray-400"></i>
                                  Thông tin tài khoản
                              </a>
                              <a class="dropdown-item" href="/sinhvien/caidat">
                                  <i class="fas fa-cogs fa-sm fa-fw mr-2 text-gray-400"></i>
                                  Cài đặt
                              </a>
                              <div class="dropdown-divider"></div>
                              <a class="dropdown-item" href="/" data-toggle="modal" data-target="#logoutModal">
                                  <i class="fas fa-sign-out-alt fa-sm fa-fw mr-2 text-gray-400"></i>
                                  Đăng xuất
                              </a>
                          </div>
                      </li>

                  </ul>

              </nav>
              <!-- End of Topbar -->

              <!-- Begin Page Content -->
              <div class="container-fluid">

    <div class="d-sm-flex align-items-center justify-content-between mb-4">
      <h6 class="h3 mb-0 font-weight-bold " style="color: #858796;">Trang chủ sinh viên</h6>
    </div>

    <!-- Content Row -->

    <div class="row">
      <!-- Area Chart -->
      <div class="col-xl-7 col-lg-7">
        <div class="card shadow mb-4">
          <!-- Card Header - Dropdown -->
          <div
            class="card-header py-3 d-flex flex-row align-items-center justify-content-between"
          >
            <h6 class="m-0 font-weight-bold " style="color: #858796;">Tin tức</h6>
            <div class="dropdown no-arrow">
              <a
                class="dropdown-toggle"
                href="#"
                role="button"
                id="dropdownMenuLink"
                data-toggle="dropdown"
                aria-haspopup="true"
                aria-expanded="false"
              >
                <i class="fas fa-ellipsis-v fa-sm fa-fw text-gray-400"></i>
              </a>
              <div
                class="dropdown-menu dropdown-menu-right shadow animated--fade-in"
                aria-labelledby="dropdownMenuLink"
              >
                <div class="dropdown-header">Dropdown Header:</div>
                <a class="dropdown-item" href="#">Action</a>
                <a class="dropdown-item" href="#">Another action</a>
                <div class="dropdown-divider"></div>
                <a class="dropdown-item" href="#">Something else here</a>
              </div>
            </div>
          </div>
          <!-- Card Body -->
          <div class="card-body">
            <div
              class="table-responsive"
              style="
                width: 670px;
                height: 320px;
                overflow-x: auto;
                overflow-y: auto;
              "
            >
              <table width="100%" cellspacing="0">
                <tbody>
                  <% tintuc.rows.forEach(function(tintuc){ %>

                  <tr>
                    <td>
                      <a
                        href="#"
                        style="
                          color: #495057;
                          font-weight: bold;
                          font-size: 19.3px;
                          text-decoration: none;
                        "
                      >
                        <b style="color: #2fa4e7"
                          ><i class="fa fa-angle-double-right"></i
                        ></b>
                        <%= tintuc.chude %></a
                      >
                    </td>
                  </tr>
                  <% }); %>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>

      <!-- Pie Chart -->
      <div class="col-xl-5 col-lg-5">
        <div class="card shadow mb-4">
          <!-- Card Header - Dropdown -->
          <div
            class="card-header py-3 d-flex flex-row align-items-center justify-content-between"
          >
            <h6 class="m-0 font-weight-bold " style="color: #858796;">Thông báo</h6>
            <div class="dropdown no-arrow">
              <a
                class="dropdown-toggle"
                href="#"
                role="button"
                id="dropdownMenuLink"
                data-toggle="dropdown"
                aria-haspopup="true"
                aria-expanded="false"
              >
                <i class="fas fa-ellipsis-v fa-sm fa-fw text-gray-400"></i>
              </a>
              <div
                class="dropdown-menu dropdown-menu-right shadow animated--fade-in"
                aria-labelledby="dropdownMenuLink"
              >
                <div class="dropdown-header">Dropdown Header:</div>
                <a class="dropdown-item" href="#">Action</a>
                <a class="dropdown-item" href="#">Another action</a>
                <div class="dropdown-divider"></div>
                <a class="dropdown-item" href="#">Something else here</a>
              </div>
            </div>
          </div>
          <!-- Card Body -->
          <div class="card-body">
            <div
              class="table-responsive"
              style="
                width: 670px;
                height: 320px;
                overflow-x: auto;
                overflow-y: auto;
              "
            >
              <table width="100%" cellspacing="0">
                <tbody>
                  <% thongbao.rows.forEach(function(thongbao){ %>

                  <tr>
                    <td>
                      <a
                        href="#"
                        style="
                          color: #495057;
                          font-weight: bold;
                          font-size: 15.3px;
                          text-decoration: none;
                        "
                      >
                        <b style="color: #e72f57"><i class="fa fa-bell"></i></b>
                        <%= thongbao.noidung %></a
                      >
                    </td>
                  </tr>
                  <% }); %>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div>
      <div class="card shadow mb-4">
        <div class="card-header py-3">
          <h6 class="m-0 font-weight-bold " style="color: #858796;">
            Các đề tài đã đăng ký
          </h6>
        </div>
        <div class="card-body">
          <div
            class="table-responsive"
            style="
              width: 1200px;
              height: 350px;
              overflow-x: auto;
              overflow-y: auto;
            "
          >
            <table width="100%" cellspacing="0">
              <tbody>
                <% sv_dangky.rows.forEach(function(sv_dangky){ %>

                <tr>
                  <td>
                    <p
                      style="
                        color: #495057;
                        font-weight: bold;
                        font-size: 19.3px;
                        text-decoration: none;
                      "
                    >
                      <i class="fa fa-check-square"></i> Sinh viên
                      <b><%=sv_dangky.tensinhvien %></b> đã đăng ký đề tài
                      <b><%= sv_dangky.tendetai %></b>, giáo viên hướng dẫn là
                      <b><%= sv_dangky.tengiangvien %></b>
                    </p>
                  </td>
                </tr>
                <% }); %>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>

    <%-include("./layout/layout.footer.ejs") %>
    <%-include("./layout/layout.js.ejs") %>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/notify/0.4.2/notify.min.js"></script>


	<script type="text/javascript">
		function notify(name) {
			$.notify(name, "success");
		}
	</script>
    <script>
      $(document).ready(function () {
        $(".dangky").click(async function () { var data = await {
    };
    var f = await fetch("http://localhost:8008/sinhvien/nopdoan", {
      method: "POST", // or 'PUT'
      headers: {
        "Content-Type": "application/json",
      },
      body: JSON.stringify(data),
    }) .then((response) => response.json())
            .then((data) => {
              if (data.uri) {
                window.location = data.uri;
              } else {
                notify(data.message);
                // setTimeout(() => {
                //   location.reload();
                // }, 3000);
              }
            });
   });
        
    
});
    </script>
  </body>
</html>
